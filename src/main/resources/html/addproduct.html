<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Form and List</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<h2>Add Product Form</h2>

<form action="/product.action" method="post">
    <label for="manufacturer">Manufacturer:</label>
    <input type="text" id="manufacturer" name="manufacturer" required><br>

    <label for="manufactureDateTime">Manufacture Date and Time:</label>
    <input type="datetime-local" id="manufactureDateTime" name="manufactureDateTime" required><br>

    <label for="expiryDate">Expiry Date:</label>
    <input type="date" id="expiryDate" name="expiryDate" required><br>

    <label for="productDescription">Product Description:</label>
    <textarea id="productDescription" name="productDescription" rows="4" required></textarea><br>

    <label for="locationManufactured">Location Manufactured:</label>
    <input type="text" id="locationManufactured" name="locationManufactured" required><br>

    <label for="batchNumber">Batch Number:</label>
    <input type="text" id="batchNumber" name="batchNumber" required><br>

    <input type="submit" value="Submit">
</form>

<!-- Check if the product list is not empty -->
<th:block th:if="${not #lists.isEmpty(products)}">
    <h2>Product List</h2>

    <table border="1">
        <thead>
        <tr>
            <th>Manufacturer</th>
            <th>Manufacture Date and Time</th>
            <th>Expiry Date</th>
            <th>Product Description</th>
            <th>Location Manufactured</th>
            <th>Batch Number</th>
        </tr>
        </thead>
        <tbody>
        <!-- Iterate through the list of JsonNodes -->
        <th:block th:each="product : ${products}">
            <tr>
                <!-- Access individual properties from the JsonNode -->
                <td th:text="${product.get('manufacturer')}"></td>
                <td th:text="${product.get('manufactureDateTime')}"></td>
                <td th:text="${product.get('expiryDate')}"></td>
                <td th:text="${product.get('productDescription')}"></td>
                <td th:text="${product.get('locationManufactured')}"></td>
                <td th:text="${product.get('batchNumber')}"></td>
            </tr>
        </th:block>
        </tbody>
    </table>
</th:block>

</body>
</html>
